services:
- docker
branches:
  only:
  - exercise-8
  - exercise-9
script:
- docker build --tag $DOCKER_USER/todo-app-prod:$TRAVIS_COMMIT --target production  .
-
- echo "Push Production image to Docker Hub"
- echo $DOCKER_PWD
- echo $DOCKER_USER
- echo $DOCKER_USER/todo-app-prod:$TRAVIS_COMMIT
- echo $DOCKER_PWD | docker login -u "$DOCKER_USER" --password-stdin
- docker push $DOCKER_USER/todo-app-prod:$TRAVIS_COMMIT
- echo "Push the TODO list to Heroku"
- docker pull $DOCKER_USER/todo-app-prod:$TRAVIS_COMMIT
- docker tag $DOCKER_USER/todo-app-prod:$TRAVIS_COMMIT registry.heroku.com/sixela-app/web
-
- echo $HEROKU_API_KEY | docker login --username=_ --password-stdin registry.heroku.com
- docker push registry.heroku.com/sixela-app/web
- heroku container:release web -a sixela-app
env:
  global:
  - FLASK_APP=todo_app/app
  - FLASK_ENV=development
  - secure: yOVMv6oWPNOKVLNI9ZdRDeACQkUCa0Dh2R88VMjT6u3jUhCT+OP+WRxBmAfz/87J/IsSaQ9IbXt3yhsQykLex6mC3bLCHh8F8qsc4uwU9lbdWco7yA9rWDupEgAAdopYWS6jyVnVzUjxnwTwn4mWzb94mkwVWPAjtiUjUwLgtEKqvNRYFyppxcqRCqRndToDb2LIPGCv1Lv4U1wtYqOhx09fzQdCg5HqcMQpbkaiBcGlXxgXqa4JVaLrqTHhlyEv/PktVHtqcuPO2gs8SkRN9M1K6BuZA8Jw4yVT2g6wAGj48SqhAyS8hjvr/0zhJIDBmlWbWipFZHCm4wvO7iNXS5MmUNbiU945aBrwCE3EtyXcHUJw5LdNFVaQrlWz2bu0VeqRVJtWk09PtXOP5nRYoxoiN6LSLMkD4mIk3psCsRO24RGZ6IDvzGn3FbqnRuJk3KPd81j7SwQuYboMZDV2FwnmxLmsF0ISsAjxPa9VB3GNY0jhhfABYROEubnhFvw6QpTH1+QZqA6HD1zurZwXn2fekflARw5nbffp5607kmx5iYJUKDB/BvYSzte14DXWdsg6mCr+N/jcWUOzt3W/g0W5lx6rI3dX3BmiOotH6vLCpCUNLz8kSBMaiQJI/CHO8qd2gqwQV7mBkdcGuzGM1MAqRD1jkTRZvxw74ifSJEM=
  - secure: Pm/l8yhe1+NJbydk84kvRMEmGB4uFurH+e1thmEApYpAI5H1GZ4F/eq7LUBJdZHBrNpNgcCaU4m6y2BSy5K9cbDK+1ecFBZLByHdyYsNxAjAu/YQashj5kJi/u6rumuiLX+kXm6OLp/lsgxI+QuZhBQlF/Nv8wag2nG5IG16rmZRI1dvgIT1gmEcQOKCDrL2Xg2zuNjL930sdK3H3iltN1Mme0eN50UTgOkNqa4IMOZiP4xOwd1v71Hom69Fzq4nTmoXMj8Tiw61uNZ/3AxHwO34jdfU16trXsMIGi+9jIsFHAgAJBDm8scyw7KAPL4iGOpFzX9WmRdXl270+egiNuTr0Eily59fVyqqUgknWzRk+OfwOqI5vZAFxU0Mq+GOAlrjZ/QW5S9V5BqOcQvqhxoahUr4TDVUgmutJ8eWbejXOUC5ODCSck6stJeRNQiu8LaD8Q+UiWWUg/0p9DC5cGynsSwfhxpxqIlhmzzfv02ljVpV/+IbY8a/ax1tK82HbYQHb2XpkwUDWySlMBl4i2pVu3RVBxm/cXrmEgQpGXWBdy1Ifut77VaPpJs79vE4HJr9E0yrawuMQGeAwJURfdrfw3vuytNZGAUS0gRe9cVXWAI2UTxBCDEUtqwNq9XMfbtPlD+5ZhNxeNVKFm/KzlFpxgyUBD23Sh90VZsKTpc=
  - secure: HVHECbDzucKtEgqHg9NCUy+2FsajMYJhhT2K2JUa9I1+mid2KVYUHF3gnNS3VgkenhlklpkBC2NPKXKt0SrfiBMmMvj4AbVVRlVcIJXz1j7vGP8PCQAp4jdRnRGFSMMf+Y5vg2XNQ2Ecb6mnbhCt6YYCDbzMUVwLbYEEks7jEHRTPhH2hh6FCExggSGwv+dIUcwXimbpQ/yR1OfiWB5sDMFkQ4hGpBKx3mssXhIq+1uGXln1dPvH6HQf5PvSOVGIls7VNVl0YR3p8Y4b+4UaQwPek6seCnb9mTq1+jmJrZJocWqnbviJmDm5B/wrM4jWHh0bk4WgtAyWlqOBT0DfZMKQdJsp3u3CSnMnEDCBA7YXhJW0nLW3eGvaAb1WBNZsEPNWyQiJ4V3nYOhBMy+ZTWFFTXfuStWjRdA9i8dnJ61gwRKNXSN7IYaGQSSvhy/Y8YDkcUz9sNJQmU1BhGZUYuqruxhAgfvJTcWLti/fMdVrjbqqdCJaKJpHtu3rQIKSK5N0Igw2x5IoDFRhHk1xJKLntliZQphTLpXwf92hP3HM3VaR9qyMyAUZtWa4niDOSOkaemUeiSjWpPDwUVF/fdolqZlVs04HkAClHxVuU7utWCzWz5PU3AQki0qt9KXT98LdJQ5IFe0BjZKFHAIdNa531Ir3HZGyG6+lu4mwI3w=
  - secure: zKjBGmQIKodD5X+HlVEV7vuAN2AMC7zG4nO9duLlxvJJSPf0H2YRB2bq4ZPMUAk8H9fadbfKAtaJ1H3yowoOHMHf7Lu3biiptNz+Zismy4zWYzqtWSZ8HaVc+5/SVoU/vYaQipJo2rx7WcekLeE2dWj5H90+58I6GasnIRof5iyGCmJmPx9N5M1KZ1zgGlh/zJcTqzWYbOlxmIrXYB5s20sbxud82ePBDjH7drkM0N9unygVo5BEJwiL4ea2LnVpERB6zOuGbPh0HOlHWYecRlyT3Qvlmb4HACC/Tl5DC1NXrC8Q7hTl71kKXjtWInTO160tZtoL03OwD0QOMO0Vj9wQj62dVhr4MkVQS/1lXLYbpjOdMErfNYCju7OXe62ogjrJsC2gwSsMyODNj3L+kVlcxkGrBtumZdKpnAw6c4Z/uAmz1WFE4vCMf3WXI1W6dt4F56PcffMVxJ5f3KHs+8Ov3LTgCV7/euxatpGsglQNq87ZKhkZCRer7LtdCuVg1BtdhLt8W+fH/M2hoUa5Je/QDhOZLilA5vRtNLUS0lVD4aAkVs6XZXeGiTABweOiFGEaH1NMdtqKJ85DNS7Kxc4ooPRGy5652qVfJqHBeC8MOhByTbRaAQRHIllNvWEDFL8+OLrYEvoD0RwVuOSpPjzj1SRVXr12edSGVVz9o98=
  - secure: MUMuFGgcjITaiIu9GNcRHnu9lhI9SDUji9xLPHCU2gWqZjH7Gi3DluimOEepD3mv+C9FR1KuijOIRNRrUpaD+3piws5D2clVhQQH+ID1FJ8Gxu0eB+wJ/b7OeJzh/wHv8plkoJlrPc86/LwIwUUn0J75URSUE/UppiMwf59q6FBNjenxwrPL8i3PPT2mtDOXCQ7PqierX7yrHvqCvM/TMI4avTzJOEoYCXLjWDB5o8OclmlZq0EchYtwArF67OVO7UnLDuR6EB3+cLxOeXAN5GFfj+A6tpIGig69lHxZPhyd77shnk/W2Uf1Fqqvn4E1n5LVsUYbzS0eQZFvjgiKcpjRyvOK8Rvz6UlMFNjiofMWMo6T9ieKf5WU2rgV4mZn/95QjXvJDqso46wEtOeUmtk/t1xojF8nJqnAap+pa9vMNupkcr18sciXrDWhkFHHUcfvqwJGU4JJ8zN9ypLoDNN1+QLeexwOS5jcQ351BGP3s7aJoNMnc+BFFLMKAWPbrQi44kYPseovL+vC26whqE2TErrJOcDuVLPSubKerNA5j461nVbExcF6eEPDkXYE/IxqV4CZztangm3RslHb4uKPpPryeUSG4RmZwowan9P6K67thX0f6N31oFXLhmfzbCpi8t/n4Aty+Rpd2/i9wCfODkqTAsr9mb8rEUN1oUk=
  - secure: uU8/cxyKjNNXxuazEDQeDmbMf7Tb5NgGmJs8d0WMNDTFvkqbw0cSsE7TJ2tKMi83jwEjuAGna4pTuHDNiRFFHGgHaXV7MNOqTi42srXvQdTDGQrY0whK2r2e9cqRcQcCMTyOdjblaAyGekPaQjsmTyz2J0cc5chEPnVKp9d6X/HcB+XSnCN9h/PqcZ9EuQ3+3P9VNIy2DbzpL1J698ibbbqJmy34Og1vTQ0kzucUmfMG7zX5SM9viRnasgaJafCb4myeir88p+eOoKXq7iDOyAYkOcPSyWVSYS8JE603Raw03XhiGRBG0a0V9W7QTyQyreriJO6SLQYQaPB1knn9I6xCaGf3sQczo8h7JyVO36FyMV6/9mcUMOMa3Xj5NEMS2I4e6BayanbFCbDP5Os5JmXyMnq4M76mP/xW351WKp9ipi8ArZxINQdeVd+/NKJSo/LjSe1SiUOLZAkFLJ9a0gfgYycfeG2BYXODijYHqXn3/24n9uQJfib9r9fG8rJNDiVZpWUigl3yC4LoK1xGt9KGp8Sb7hXrbsrcvzVejzSWJ5ED/Zf5vHsO0JEm+hgNhKadrm/hE++ZKYHxKUDSta2HGPFZZs8Vem75Fn/0GE5wimKfHNx4dvCTky4sSuLz5SsywFPyywalgcB2nAJJAcOnMm8V0E6cWHzctKsRLFQ=
  - secure: e9z/qZ1Eipqu4Hm4Nx/DVFhhK2nHs63D9jcVyYev5nKXc71vD/7fNZMnLgyiM8/izlLv5c/r9gZSH/7QG612CSzsnIrao9z2ZnMjAInIk8N+a23x9+1DjGH/KcssVkS77J7kLDbcYNGzxqzMF7L0op2GLgcg3R1l1/UWsEiUrOUANVhn0GLTUfTg3TIk94OpoDTvVfv8/PPTk/X4Ayi6DEYZCbKXo9D5DDgLlQ1MmPa1elxcP8dJ5rVEqxmh4pndngj1A3dB6o9+LAed6qcViuhjNO3ydxmZv9mMP8hO3IxiWKvtzW3KWBo5VXfRiCPwak/jEni9HTVQvXjI0rtYAPxgUy4gsmUIzm5q0DBQNVBDiIE0ZJTfEoyc2ofzkzVoKCq5oSPycd+Q02IuLXxymnnQ505H1F1LwN6wreiDTl+coSOOjcNdbAq2bxRh6ALnMLyxzVlM37TiFVhN+1b7mHh6v4UwYjldCY6ibX2NFpHV7XGfYbQXn7/QKuYZv/N9aEmTWckfHT2FDwui8u6IQ7v1XnLZcDXXpBlaFbPfGeisOtZ8oV87bzrGJWHCKboMCf1EhC9gt/fAm0fXKe/8XYBwbJrUfdexnT3jXki9uBqj3T57AKaYAjXQvDcTGoei9zMgIo/n2Skv+T86KuCHpZXv8ZrDCRtZEUSrwxYQtQU=
  - secure: K1TCOi63s+JITwKMsl9st8r0Z5BGgmMOpKYeq4JQ1h8Se3twxFh+RidKcsdVxqN+XvGMa6OcMxHVXkQUGMUvk9834Wisll0aS8dG3PABPkaUKrIAhtLeoAc279NSScJGy++vmSpq+mqpu8j12NgmKJOMAXmqUF3GDJIjTHyL/CiCu+Bv6kKug+pYxpnBEem8LfQh8U4LoLYgCkTCmPV9+R4iUzyIqaZSGpkzjx0EUm5RKkgI2z4fF8pfIeAwhljvbtHqPuMZumMR6kSWIJ67hw7qTMAaQ6Cut4RlX8Yz89LfyBlUSdVDyk0otwsd5H0xk1bL0yd1541x5BOBLHhG7QjvFtEmNgLNmcHJLNQoHS7dleM7SVe9Dt6RVFS+/K01zaDp0k4PVkHKDd83s2n04Xe7mes1W0sCdp5DVFVs2DQLBSqtyzOe7WVqJoKDOGgYevvLlXXJmo+cOxGyeX1Kmy2EeXEPxo1CZZdst2KzhQLBfduwCY0emLrHXgtTHOnmS/WmaT88N1aLW/SynjIlBz9O5XRcPLTUj+tjwUYcX0pn76UJmDDQiZDWBpr2tMEoZGICspXjBYbDblnYmhbH+YxabeMcar/09//zsOedqfrFZjrSW/6yVceWmfbR2EO50XNmZbGoCwa6iH3/pOIw3XfoXYZVpuOSS1b/50Jb4qc=
  - secure: xC7h5NbS+m7ruZC8hqJZqMwgVDyHXJ/grzSX2qKtJmn49de/CgzC58i0TwA1Z+cB0qX4kdKiMgM6IFrUf5yafjn8sN1gPEqhlJ4Mvudc1TH6MrYv4tBAZzMHiDie2UcJEct1ktWfaqk0Z9YHutwWc9fqdsjXyBeztKnDysB/uQxghhHx/Z+T4gnZhhweiE4QB8cNrZW61WggFNtBWG452gWMfo20O1tV+aTS9ROZTFiB7Bdkak/VZCqHNbudXx7q3ixF4LGrpScbM3OPbNR0F0MsMyUqf8tgEnM11y6dEnr25jOOFCAjFdpLsF/1xfQUbiQb3Ru+aKe9joUB3R+2sHB4NWB5rN9PcgjNcfN4KDPIqnXiXqLR7PVzh48Pc70d7gcmhc+2HJkxyklzriK16mlJ/TnE6pzhjOq5gwgDXphCvGaD7+iNXbtri4y5oFQmRl+5K1N4YXYr3Yuo6KcAongYBqmO0FRcBlyFHsOkRc534HlWolzGenxWoqMfDE56ZKS4snrd+qYf2R1+TOZDUBkj3sxdqc5AIb3e/bURw5jdKW8VaTT4lcbUQmx/Ax1Iy+4wuatP9Ra1DnBkDPPVTPmo6/nBJbjAriZC92bzlJx/14Uo3UqIJP97TTmZxHXPH3EcbZj3qNoqBj2HrBy+0kc3kt2uxEYCEEKwwtU/qPY=
  - secure: CPUND1A2aaot8Huk1Jq/R1eGpij2VxXXETIUrcyAr6rWzWgYl1OINPHeGFAdHaPTs7IUNBk7iy4daYYoTfslqogedxEBKcHYHZ8Oxjm96AQqVKPpLWMzf9UKYbhkU5x1VfU3gFfRRNU8F/N3VcMglsoK5oEt2dDSw6KoU0PmhbLoMjorNJRn18m8hNdWqY1Uucl9aVQCuBqW7oyC/hY3l2XDulitk+v78Fij/ijGfpQM7rVMlTJ5OqUAPfQbqNAv0NV0wjRoJem3ztF8083PXGQoQb7kuvSF/ky32OEpsmyokg55Wmt9JQ2AnBsTIKCLiZcZ74mfV9J27VRztfoR9z4ZJ4XQnfygp8QecOS9rSQ60zbcR2sboSD0fhBQnulKqJSzIBKblA8gK6XuF6Lv2UIw9QGC2mci2BK03Lo4LuNKpACcKkrwiHP/Y5QeDqGgHPV3qngq6oflTG0CWOa/JoqwZ+JdVJEvu1xKXXXx/ImWcLKuc/k8pDEzN2bngnaNTi7GQnPe8syNAVU9uLEIqSI5WzcU2dF1u9iBYWUdA6lQpG9xKlh5v59vMZj4sc9Q01xixU5iJPyVaiTsn0RGG4biYpc9/nXT8ePVNzSTBhoOQq/XzBQYsbMRIxKlS4i0KoCxHK8WIE6237aZdz29ilL7QZtkGNNZ5F2ycWZMi9A=
  - secure: WjD1anrNniWT8YHB9/zpdIwD1VXdOLpMMcafjrssaFlXChwnzgH6pU2G72GqYISqV6hS/5Ht9jsfd1Zbp+wX0NPGr7JKQ7xoH3jpgl1adgdz5LCoiz6UwbBoWJV4wyuUguxcDorsoCvmaW0ayWyXpBUE+Qh9iReqcibt0nT5kAzmzadU3DFsM3Zmo+d6dGSFSC4YtRWHb0dqtL6zZlB84UU1lT/bD7CwlLmJjCtNsjPEagIfYkmLf/HqVinY4UaXTkNjjj5LHiPXOWi7yISI1rk39wrEK/2AaTcAxml8LtOB2GlwN8pDpBqYDEDxXmRetWKb4EVNhhGeHA3lRDD1as4cJKATI63sJSACcy8zYr0+4xnsPetmyQ6khxrN8PzqEEE7SZ3uUW61+tDvu7RR3vbp+WRVCS7SUuilXLaZxRDfDgrhe0HndhOvJrnWZvlFEeSbExJtPwn5svXptPqaS0y43QcG39rkD0vnCYoupK425iSdRMwBnNfB3c5ajb/dPtnthiBoOcGgfhBYufVOzOPDOpnHx80P/PX/TMwYINrU2nEhqVmu6Nfr5sydepTTTq9XkN4v0ywPUEA7IzgogQ3CmLs3pErVgz8yTiZMEUAPA8HztbIbdLlg5OLh5A3dN4X3RHqacQ6rJ0kbeI57K1YzJ5dcwSKMs4fMjhxeAhc=
  - secure: hHnLLptZdpkYtDP/TMXTZn4GOTKJs6q08i7E4nrVFpK1UPsay+MgvjSd3TCOgs6MF/18bS/eJrOtVovxNxzmd6vZCr5V/4xP6lFW/cwk2Em60tWxsc1PfsF2BXQ+7BJnB/OOxjLwUBwvGTTlK1GFIjFnEn66bcqsf+D6OvJ/dtYj6KQ1Gm0AxAewQDbM1gQzL2UcRDAaeZ3F1XgsJHS+FfoXpU3+uro+piJTglmpeYOwS4Fwr5hde/OkAS8rfuKSI5UQYzmeR8+a5me4ICJny12vu3Lvr0NwOiZwnEbqh338WWyqOa/T7yHXs9RxV7TpmiYykfEK9KtZi9KOFMKntW4BlTV5nMi/z/zIV7pmpCaplBQhXHBCBTETfiqZsmh50mJQVjEXcWqVuoX9FncjwdtgyPNeP4aVWKtIFYWVFS7aSNLWJ0Om4zqA+oQqA3RCiEUomMj9ioEOoruk06gyobzqsXT5LBX2ROkPLfz0ExL6BYW9J61EQIAw2Wc8h7iESqEdOvd+qF7vyMqe/bqQ4oymwVe4myA89S9Fb2k3K+gpYUoRyipWO5FdJBgaPyyGxK/zeJK1kzIlRp1bwCOL9JKQFxRodI7QrhCdFncme5vu5/idC9N/0nJZlMy1nKHEJMSCOsNVdeSzQ9zHVvtivOoONDXZb04nNn3Adossfbo=
notifications:
  slack: alexistest-workspace:ygssCOBT8NO8ImW4xBVasQZI
